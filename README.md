# java-chess
체스 게임 구현을 위한 저장소

## 미션 회고 및 학습 내용 Step 1
### 미션 포인트 - Step 1 ⏰ 
   - SOLID, GRASP 원칙을 생각하며 개발한다.
   - 객체지향 생활 체조를 고려하며 개발한다.
   - board와 piece의 관계
   - 각기 다른 Piece의 이동전략을 어떻게 가져갈 것인가?
   - 게임의 작업흐름은 누가 제어할 것인가?
### 학습 내용  - Step 1 📖
   - 템플릿 메서드 패턴을 통해, 일관된 이동전략 및 검증 구현
   - 상태에 따른 게임지원 유무 판단
   - board와 piece의 관계에 대한 고민
      - 결국 Board는 Piece를 동기화해야함.
      - 그렇다면 관리하기 용이한 Board에서 Piece를 아는 것이 맞다고 생각함.
      - 옵저버 패턴을 활용해서 둘간의 관계를 약하게 만들 수 있지만, 구현 과정에서 어려움이 있어 Board가 Piece를 아는 형태로 구성
   - 변할 확률이 높은 객체가 변하지 않는 객체를 의존하는 것이 바람직함(Dto -> Entity)
   - Piece마다 다르게 움직이는 부분을 Enum을 활용하여 해결
      ```java
      public enum Direction {
        NORTH(0, 1),
        NORTHEAST(1, 1),
        EAST(1, 0),
        SOUTHEAST(1, -1),
        SOUTH(0, -1),
        SOUTHWEST(-1, -1),
        WEST(-1, 0),
        NORTHWEST(-1, 1),

        NNE(1, 2),
        NNW(-1, 2),
        SSE(1, -2),
        SSW(-1, -2),
        EEN(2, 1),
        EES(2, -1),
        WWN(-2, 1),
        WWS(-2, -1);
      }
      ```

### 아직 어려운 개념들 Step 1 😂
   - 도메인 자체가 어려워서 구현이 어려웠음..
   - 게임의 흐름을 제어하는 역할은 Service의 역할일까, Board의 역할일까?
   - 도메인의 실행순서를 보장해준다는 점에서는 Service의 역할같지만 도메인끼리 협력하며 어플을 구성한다는 점에서는 Board의 역할로 보임.
   - Service를 통해 게임 흐름을 제어하고 있지만, 실제로 Piece를 이동시키고 Board를 변경하는 것은 세부 도메인이라고 생각함. 이에 Board에서 담당하도록 함.
   - Service에서 관리하는 경우 도메인간의 의존을 줄일 수 있는 장점이 있지만 로직의 중복이 발생할 수 있음. 도메인을 추상화해서 가져가는 것이 좋아보이는데 어려움..
   - JDBC관련된 로직을 추상화하는 것이 쉽지 않았음

---

## 미션 회고 및 학습 내용 Step 2

### 미션 포인트 - Step 2 ⏰ 
   - 레이어별 역할을 명확히 한다.
   - 객체지향 생활 체조를 고려하며 개발한다.
   - 중복되는 JDBC관련 로직을 분리한다.
   - Dto는 어떻게 변환 및 사용해야하는가를 학습한다.
### 학습 내용  - Step 2 📖
   - 객체를 계속 포장하게 되면 Getter 사용이 길어짐. - 디미터의 법칙을 적용하여 최대한 자신이 아는 것들만 반환하도록 변경
   - Lambda를 활용하여 Route 메소드 분리
   - Dao에서 비즈니스 로직을 수행하는 부분 리팩토링
   - Connection 생성 관련 로직을 담당하는 클래스로 분리
   - Dto와 Entity 변환로직은 변경이 자주 일어나는 곳에서, 아닌 쪽으로 수행하는 것이 바람직하다.
   - Dto를 어디 레이어까지 적용하는 것이 좋을지 고민한다.
   - try catch 대신 try with를 사용하여 자원을 관리한다.
   - 예외는 혹시라도 e.printStack()을 사용하지 말자. 스택정보를 취합해야 하기 떄문에 많은 부하가 발생한다.
   - Json으로 리턴하더라도 Map을 그대로 리턴하기 보단, Dto로 감싸서 리턴하자.(추가정보를 제공할 때와 사용 측면에서 좋다)

### 아직 어려운 개념들 Step 2 😂
   - 웹과 관련된 용어에 대한 이해가 부족해 어려움이 있었다.
      - DTO와 VO
      - Controller / Service의 역할
      - Dao의 역할
      - 도메인의 역할
---
